<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch danh m·ª•c</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            background-color: #f8f9fa;
        }
        h2 {
            text-align: center;
            color: #333;
        }
        form {
            margin-bottom: 20px;
            text-align: center;
        }
        input[type="text"] {
            padding: 6px;
            width: 250px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button, a.btn {
            background-color: #007bff;
            color: white;
            padding: 6px 12px;
            border: none;
            text-decoration: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover, a.btn:hover {
            background-color: #0056b3;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .actions a {
            margin: 0 5px;
            color: #007bff;
            text-decoration: none;
        }
        .actions a:hover {
            text-decoration: underline;
        }

    </style>

    <script>
        function confirmDelete(button) {
            const name = button.getAttribute('data-category-name');
            return confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a danh m·ª•c '" + name + "' kh√¥ng?");
        }
    </script>
</head>

<body>
<div th:replace="~{fragments/_header :: header}"></div>
<h2>üìÇ Danh s√°ch danh m·ª•c</h2>

<form th:action="@{/categories/search}" method="get">
    <input type="text" name="name" placeholder="Nh·∫≠p t√™n danh m·ª•c..." th:value="${searchKey}">
    <button type="submit">üîç T√¨m ki·∫øm</button>
    <a th:href="@{/categories}" class="btn">üîÑ T·∫£i l·∫°i</a>
</form>

<div sec:authorize="hasRole('ADMIN')" style="text-align: right; margin-bottom: 10px;">
    <a th:href="@{/categories/new}" class="btn">‚ûï Th√™m danh m·ª•c m·ªõi</a>
</div>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>T√™n danh m·ª•c</th>
        <th>M√¥ t·∫£</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="category : ${categories}">
        <td th:text="${category.categoryId}"></td>
        <td>
            <a th:href="@{'/categories/' + ${category.categoryId}}" th:text="${category.categoryName}"></a>
        </td>
        <td th:text="${category.description}"></td>
        <td class="actions">
            <a th:href="@{'/categories/edit/' + ${category.categoryId}}">‚úèÔ∏è S·ª≠a</a>

            <form th:action="@{'/categories/delete/' + ${category.categoryId}}"
                  th:method="post"
                  style="display: inline; margin: 0; padding: 0;">

                <button type="submit"
                        style="background:none; border:none; color:#007bff; padding:0; cursor:pointer; text-decoration:none;"

                        th:attr="data-category-name=${category.categoryName}"

                        onclick="return confirmDelete(this);">

                    üóëÔ∏è X√≥a
                </button>
            </form>
        </td>
    </tr>
    <tr th:if="${#lists.isEmpty(categories)}">
        <td colspan="4" style="text-align: center; color: gray;">Kh√¥ng c√≥ danh m·ª•c n√†o.</td>
    </tr>
    </tbody>
</table>

</body>
</html>
